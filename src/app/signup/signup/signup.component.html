<div class="signup-page">
  <div class="content px20">
    <form class="signup-form" *ngIf="!isSuccessful" name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm"
      novalidate>
      <div class="text-center">
        <h2 class="app-name">SONIC: Sign-Up</h2>
      </div>
      <div fxLayout="row">
        <div fxFlexFill>
          <mat-form-field class="w-100">
            <input matInput type="text" class="form-control" name="firstName" [(ngModel)]="form.firstName"
              [formControl]="firstnameFormControl" placeholder="First name">
            <mat-error *ngIf="firstnameFormControl.hasError('minlength') && !firstnameFormControl.hasError('required')">
              First name must have at least 3 characters
            </mat-error>
            <mat-error *ngIf="firstnameFormControl.hasError('maxlength') && !firstnameFormControl.hasError('required')">
              First name must have at most 20 characters
            </mat-error>
            <mat-error *ngIf="firstnameFormControl.hasError('required')">
              First name is required
            </mat-error>
          </mat-form-field>

          <mat-form-field class="w-100">
            <input matInput type="text" class="form-control" name="lastName" [(ngModel)]="form.lastName"
              [formControl]="lastnameFormControl" placeholder="Last name">
            <mat-error *ngIf="lastnameFormControl.hasError('minlength') && !lastnameFormControl.hasError('required')">
              Last name must have at least 3 characters
            </mat-error>
            <mat-error *ngIf="lastnameFormControl.hasError('maxlength') && !lastnameFormControl.hasError('required')">
              Last name must have at most 20 characters
            </mat-error>
            <mat-error *ngIf="lastnameFormControl.hasError('required')">
              Last name is required
            </mat-error>
          </mat-form-field>
          <mat-form-field class="w-100">
            <input matInput type="email" class="form-control" [(ngModel)]="form.email" [formControl]="emailFormControl"
              placeholder="Email">
            <mat-error *ngIf="emailFormControl.hasError('email') && !emailFormControl.hasError('required')">
              Please enter a valid email address
            </mat-error>
            <mat-error *ngIf="emailFormControl.hasError('required')">
              Email is required
            </mat-error>
          </mat-form-field>
          <mat-form-field class="w-100">
            <input matInput type="password" class="form-control" name="password" [(ngModel)]="form.password"
              [formControl]="passwordFormControl" placeholder="Password" (input)="onConfirmPasswordChange()">
            <mat-error *ngIf="passwordFormControl.hasError('minlength') && !passwordFormControl.hasError('required')">
              Password must have at least 6 characters
            </mat-error>
            <mat-error *ngIf="passwordFormControl.hasError('required')">
              Password is required
            </mat-error>
          </mat-form-field>

          <mat-form-field class="w-100">
            <input matInput type="password" placeholder="Confirm Password" [(ngModel)]="form.confirmPassword"
              [formControl]="confirmPasswordFormControl" (input)="onConfirmPasswordChange()">
            <mat-error *ngIf="confirmPasswordFormControl.hasError('match') && !confirmPasswordFormControl.hasError('required')">
              Passwords do not match
            </mat-error>
            <mat-error *ngIf="confirmPasswordFormControl.hasError('required')">
              Confirm password is required
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div fxLayout="row">
        <div fxFlexFill>
          <button type="submit" mat-raised-button color="primary" class="w-100">Sign-Up</button>
          <button type="button" mat-button color="primary" class="w-100" (click)="onLogin()">Already have an Account?
            Login</button>
        </div>
      </div>
      <div class="alert alert-warning" *ngIf="f.submitted && isSignUpFailed">
        Signup failed!<br />{{ errorMessage }}
      </div>
    </form>
    <div class="alert alert-success" *ngIf="isSuccessful">
      Your registration is successful!
    </div>
  </div>
</div>